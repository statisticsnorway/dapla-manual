<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Spørsmål og svar – Dapla-manualen</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/dapla-favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Ingen resultater",
    "search-matching-documents-text": "treff",
    "search-copy-link-title": "Kopier link til søk",
    "search-hide-matches-text": "Skjul flere treff",
    "search-more-match-text": "flere treff i dokumentet",
    "search-more-matches-text": "flere treff i dokumentet",
    "search-clear-button-title": "Nullstill",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Avbryt",
    "search-submit-button-title": "Send",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="faq.css">
<meta property="og:title" content="Spørsmål og svar – Dapla-manualen">
<meta property="og:description" content="">
<meta property="og:image" content="https://manual.dapla.ssb.no/images/dapla-long.png">
<meta property="og:site_name" content="Dapla-manualen">
<meta property="og:image:height" content="403">
<meta property="og:image:width" content="863">
<meta name="twitter:title" content="Spørsmål og svar – Dapla-manualen">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://manual.dapla.ssb.no/images/dapla-long.png">
<meta name="twitter:image-height" content="403">
<meta name="twitter:image-width" content="863">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/dapla-long.png" alt="Logo for Dapla" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Dapla-manualen</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./statistikkere/index.html"> 
<span class="menu-text">Manual</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./utviklere/lenker.html"> 
<span class="menu-text">Utviklere</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./notebooks/index.html"> 
<span class="menu-text">Eksempler</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./blog/index.html"> 
<span class="menu-text">Blogg</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./om-dapla.html"> 
<span class="menu-text">Om Dapla</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hjelp" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hjelp</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hjelp">    
        <li>
    <a class="dropdown-item" href="https://start.dapla.ssb.no/"><i class="bi bi-people-fill" role="img">
</i> 
 <span class="dropdown-text">Dapla Ctrl</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://web.yammer.com/main/org/ssb.no/groups/eyJfdHlwZSI6Ikdyb3VwIiwiaWQiOiI5MDUzMjA2In0/all"><i class="bi bi-people-fill" role="img">
</i> 
 <span class="dropdown-text">Diskusjonsforum</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://ssb.pureservice.com/#/new/7"><i class="bi bi-send-fill" role="img">
</i> 
 <span class="dropdown-text">Kundeservice</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./faq.html"><i class="bi bi-question-circle-fill" role="img">
</i> 
 <span class="dropdown-text">FAQ</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./faq-dapla-lab.html"><i class="bi bi-question-circle-fill" role="img">
</i> 
 <span class="dropdown-text">FAQ Dapla Lab</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-logg-inn" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-person-circle" role="img">
</i> 
 <span class="menu-text">Logg inn</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-logg-inn">    
        <li>
    <a class="dropdown-item" href="https://lab.dapla.ssb.no/"><i class="bi bi-graph-up" role="img">
</i> 
 <span class="dropdown-text">Dapla Lab (prod)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://lab.dapla-test.ssb.no/">
 <span class="dropdown-text">Dapla Lab (test)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://lab.dapla-dev.ssb.no/"><i class="bi bi-graph-up" role="img">
</i> 
 <span class="dropdown-text">Dapla Lab (dev)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://jupyter.dapla.ssb.no/"><i class="bi bi-journal-code" role="img">
</i> 
 <span class="dropdown-text">JupyterLab (prod)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://jupyter.dapla-staging.ssb.no/"><i class="bi bi-journal-code" role="img">
</i> 
 <span class="dropdown-text">JupyterLab (staging)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://console.cloud.google.com/"><i class="bi bi-google" role="img">
</i> 
 <span class="dropdown-text">Google Cloud Console</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://datahub.external.staging.ssb.cloud.nais.io/explore"><i class="bi bi-database-fill" role="img">
</i> 
 <span class="dropdown-text">DaplaHub (POC)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://ctrl.dapla.ssb.no/"><i class="bi bi-controller" role="img">
</i> 
 <span class="dropdown-text">Dapla Ctrl</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/statisticsnorway/dapla-manual"> <i class="bi bi-github" role="img" aria-label="Dapla-manual GitHub repository">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Spørsmål og svar</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Innhold</h2>
   
  <ul>
  <li><a href="#hvordan-finner-jeg-et-google-prosjekt-sin-prosjekt-id" id="toc-hvordan-finner-jeg-et-google-prosjekt-sin-prosjekt-id">Hvordan finner jeg et Google-prosjekt sin prosjekt-ID?</a></li>
  <li><a href="#hvordan-får-jeg-slettet-et-github-repo-under-statisticsnorway" id="toc-hvordan-får-jeg-slettet-et-github-repo-under-statisticsnorway">Hvordan får jeg slettet et GitHub-repo under statisticsnorway?</a></li>
  <li><a href="#hvordan-løser-jeg-feilmeldinger-knyttet-til-at-data-rate-exceeded-i-jupyter" id="toc-hvordan-løser-jeg-feilmeldinger-knyttet-til-at-data-rate-exceeded-i-jupyter">Hvordan løser jeg feilmeldinger knyttet til at <strong>data rate exceeded</strong> i Jupyter?</a></li>
  <li><a href="#hvordan-kan-jeg-gjenopprette-filer-fra-bøtter" id="toc-hvordan-kan-jeg-gjenopprette-filer-fra-bøtter">Hvordan kan jeg gjenopprette filer fra bøtter?</a></li>
  <li><a href="#hvordan-sjekker-jeg-om-kildomaten-er-tilgjengelig-for-mitt-team" id="toc-hvordan-sjekker-jeg-om-kildomaten-er-tilgjengelig-for-mitt-team">Hvordan sjekker jeg om Kildomaten er tilgjengelig for mitt team?</a></li>
  <li><a href="#hvordan-kan-jeg-se-innholdet-i-mitt-team-sine-bøtter" id="toc-hvordan-kan-jeg-se-innholdet-i-mitt-team-sine-bøtter">Hvordan kan jeg se innholdet i mitt team sine bøtter?</a></li>
  <li><a href="#atlantis-feiler-når-jeg-skrur-på-en-feature.-hva-gjør-jeg" id="toc-atlantis-feiler-når-jeg-skrur-på-en-feature.-hva-gjør-jeg">Atlantis feiler når jeg skrur på en <em>feature</em>. Hva gjør jeg?</a></li>
  <li><a href="#jeg-får-meldingen-account-already-exists-når-jeg-prøver-å-logge-meg-inn-på-dapla.-hvordan-løser-jeg-det" id="toc-jeg-får-meldingen-account-already-exists-når-jeg-prøver-å-logge-meg-inn-på-dapla.-hvordan-løser-jeg-det">Jeg får meldingen <em>Account already exists</em> når jeg prøver å logge meg inn på Dapla. Hvordan løser jeg det?</a></li>
  <li><a href="#hvorfor-viser-git-status-endringer-når-jeg-ikke-har-endret-filene" id="toc-hvorfor-viser-git-status-endringer-når-jeg-ikke-har-endret-filene">Hvorfor viser <code>git status</code> endringer når jeg ikke har endret filene?</a></li>
  <li><a href="#hvordan-setter-jeg-opp-2fa-med-authenticator-appen-mot-github-etter-at-jeg-har-byttet-telefon" id="toc-hvordan-setter-jeg-opp-2fa-med-authenticator-appen-mot-github-etter-at-jeg-har-byttet-telefon">Hvordan setter jeg opp 2FA med Authenticator-appen mot GitHub etter at jeg har byttet telefon?</a></li>
  <li><a href="#hvorfor-får-jeg-ikke-opprettet-mapper-fra-google-cloud-console-gcc" id="toc-hvorfor-får-jeg-ikke-opprettet-mapper-fra-google-cloud-console-gcc">Hvorfor får jeg ikke opprettet mapper fra Google Cloud Console (GCC)?</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/statisticsnorway/dapla-manual/edit/main/dapla-manual/faq.qmd" class="toc-action"><i class="bi bi-github"></i>Rediger siden</a></li><li><a href="https://github.com/statisticsnorway/dapla-manual/issues/new" class="toc-action"><i class="bi empty"></i>Rapporter feil</a></li><li><a href="https://github.com/statisticsnorway/dapla-manual/blob/main/dapla-manual/faq.qmd" class="toc-action"><i class="bi empty"></i>Vis kilde</a></li></ul></div></nav>
<section id="hvordan-finner-jeg-et-google-prosjekt-sin-prosjekt-id" class="level3">
<h3 class="anchored" data-anchor-id="hvordan-finner-jeg-et-google-prosjekt-sin-prosjekt-id">Hvordan finner jeg et Google-prosjekt sin prosjekt-ID?</h3>
<p>Prosjekt-ID-en til et Google-prosjekt er en unik identifikator som brukes til å identifisere prosjektet i Google Cloud Platform. Prosjekt-ID-en er en streng som består av små bokstaver, tall og bindestrek. Prosjekt-ID-en er ikke det samme som prosjektnavnet, som kan inneholde store bokstaver og mellomrom.</p>
<p>Du finner prosjekt-ID ved logge deg inn på <a href="./statistikkere/gcc.html#innlogging">GCC</a>, <a href="./statistikkere/gcc.html#prosjektvelger">åpne prosjektvelgeren</a>, søk opp ditt prosjekt, og så ser du det i høyre kolonne, slik som vist i denne sladdete kolonnen i <a href="#fig-prosjektvelger" class="quarto-xref">Figur&nbsp;1</a>.</p>
<div id="fig-prosjektvelger" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Bilde som viser prosjektvelgeren i Google Cloud Console">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-prosjektvelger-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/prosjektvelger.png" class="img-fluid figure-img" alt="Bilde som viser prosjektvelgeren i Google Cloud Console">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-prosjektvelger-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;1: Prosjektvelgeren i Google Cloud Console
</figcaption>
</figure>
</div>
</section>
<section id="hvordan-får-jeg-slettet-et-github-repo-under-statisticsnorway" class="level3">
<h3 class="anchored" data-anchor-id="hvordan-får-jeg-slettet-et-github-repo-under-statisticsnorway">Hvordan får jeg slettet et GitHub-repo under statisticsnorway?</h3>
<p>Hovedregelen er at vi arkiverer repoer istedenfor å slette. Det skyldes at vi kan trenge å ettergå historikken i repoer ved et senere tidspunkt. Arkivering av repoer kan du gjøre selv under <strong>Settings</strong> i repoet.</p>
<p>I de tilfellene der du mener at det gir mest mening å slette repoet, så må dette gjøres av en Github-administrator. Da <a href="https://ssb.pureservice.com/">sender du en henvendelse til Kundeservice</a> og ber om at repoet slettes. Husk å oppgi navnet på repoet du ønsker å få slettet.</p>
</section>
<section id="hvordan-løser-jeg-feilmeldinger-knyttet-til-at-data-rate-exceeded-i-jupyter" class="level3">
<h3 class="anchored" data-anchor-id="hvordan-løser-jeg-feilmeldinger-knyttet-til-at-data-rate-exceeded-i-jupyter">Hvordan løser jeg feilmeldinger knyttet til at <strong>data rate exceeded</strong> i Jupyter?</h3>
<p>Når du mottar følgende melding i Jupyter:</p>
<blockquote class="blockquote">
<p><strong>Feilmelding:</strong></p>
<pre><code>IOPub data rate exceeded.
The Jupyter server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--ServerApp.iopub_data_rate_limit`.

Current values:
ServerApp.iopub_data_rate_limit=1000000.0 (bytes/sec)
ServerApp.rate_limit_window=3.0 (secs)</code></pre>
</blockquote>
<p>betyr det at mengden data som sendes fra jupyter-kernelen til jupyterlab-frontend overskrider den tillatte grensen. Selv om det er mulig å justere <code>ServerApp.iopub_data_rate_limit</code> og <code>ServerApp.rate_limit_window</code> for å endre denne grensen, ønsker vi ikke dette. Å endre disse verdiene kan ha en negativ påvirkning på Jupyterlab sin ytelse.</p>
<section id="her-er-noen-løsningsforslag" class="level4">
<h4 class="anchored" data-anchor-id="her-er-noen-løsningsforslag">Her er noen løsningsforslag:</h4>
<ol type="1">
<li>Reduser datamengden: Prøv å redusere datamengden du prøver å vise. Hvis du for eksempel viser en stor pandas dataframe, kan du vise kun toppradene med <code>df.head()</code> eller et tilfeldig utvalg med <code>df.sample(10)</code>.</li>
<li>Legg til forsinkelse: Bruk <code>time.sleep()</code>-funksjonen i Python for å legge til en pause mellom hver utskrift. Dette kan spre utdataene over en lengre tidsperiode, noe som kan hjelpe med å unngå å overskride datagrensen.</li>
<li>Skriv til en fil: I stedet for å skrive utdata direkte i Jupyter, kan du vurdere å skrive dataene til en fil. Dette omgår IOPub-datahastighetsgrensen, og du kan se gjennom dataene i ettertid.</li>
<li>Unngå utskrift: Hvis du kun trenger å utføre beregninger eller operasjoner på dataene, vurder å gjøre det uten å skrive ut resultatene i Jupyter.</li>
</ol>
</section>
</section>
<section id="hvordan-kan-jeg-gjenopprette-filer-fra-bøtter" class="level3">
<h3 class="anchored" data-anchor-id="hvordan-kan-jeg-gjenopprette-filer-fra-bøtter">Hvordan kan jeg gjenopprette filer fra bøtter?</h3>
<p>Bøttene som opprettes i <a href="./statistikkere/features.html">featuren <em>dapla-buckets</em></a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> har en <em>Retention policy</em> som gjør at slettede eller overskrevne objekter kan gjenskapes i en viss periode.</p>
<p>I dapla-buckets blir overskrevne og slettede filer noncurrent. En noncurrent versjon blir slettet hvis den er mer enn <strong>180 dager gammel og det er minst 2+ eller 3+ nyere versjoner i bøtta</strong>.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>Alle dapla-teamene har objektversjon aktivert som standard på alle bøtter.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ekspertteam eller Self-managed team
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Hvis bøttene ikke er opprettet gjennom featuren <em>dapla-buckets</em>, men kanskje av et ekspertteam eller ekspertteam, så må man først forhøre seg med teamet om versjonering er skrudd på for bøtta. Hvis den ikke er det så blir kun soft-deleted filer tatt vare på i 7 dager.</p>
</div>
</div>
</div>
<p>For å gjennopprette en <em>non-current</em> eller <em>soft-deleted</em> versjon så benytte funksjonalitet fra <a href="./statistikkere/jobbe-med-data.html#dapla-toolbelt">dapla-toolbelt</a>. For å gjenskape en versjon så må man først bruke funksjonen <code>get_versions()</code> liste ut ID-en til versjonen:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>notebook</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="notebook"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dapla <span class="im">import</span> FileClient</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set bucket name and folder name(if any)</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>bucket <span class="op">=</span> <span class="st">"ssb-dapla-felles-data-produkt-prod"</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>folder <span class="op">=</span> <span class="st">"restore"</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>FileClient.get_versions(bucket, folder)</span></code><button title="Kopier til utklippstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Output</strong></p>
<pre><code>[&lt;Blob: ssb-dapla-felles-data-produkt-prod, restore/data1.parquet, 1717762669778835&gt;,
 &lt;Blob: ssb-dapla-felles-data-produkt-prod, restore/data1.parquet, 1718015249969499&gt;,
 &lt;Blob: ssb-dapla-felles-data-produkt-prod, restore/data2.parquet, 1717762673242818&gt;,
 &lt;Blob: ssb-dapla-felles-data-produkt-prod, restore/data3.parquet, 1717762677832930&gt;]</code></pre>
<p>Fra output over ser vi filen <code>data1.parquet</code> finnes i 2 versjoner. Vi kan undersøke den nærmere med følgende kode:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>notebook</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="notebook"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>files <span class="op">=</span> FileClient.get_versions(<span class="st">"ssb-dapla-felles-data-produkt-prod"</span>, <span class="st">"restore/data1.parquet"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> files:</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Name          : "</span>,<span class="bu">file</span>.name)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Generation Id : "</span>, <span class="bu">file</span>.generation)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Updated on    : "</span>, <span class="bu">file</span>.updated)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Deleted on    : "</span>, <span class="bu">file</span>.time_deleted)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"------------------------------------------"</span>)</span></code><button title="Kopier til utklippstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Output</strong></p>
<pre><code>Name          :  restore/data1.parquet
Generation Id :  1718436304922143
Updated on    :  2024-06-15 07:25:04.928000+00:00
Deleted on    :  2024-06-24 11:10:10.807000+00:00
------------------------------------------
Name          :  restore/data1.parquet
Generation Id :  1719227410801992
Updated on    :  2024-06-24 11:10:10.807000+00:00
Deleted on    :  None
------------------------------------------</code></pre>
<p>Av output over ser vi at det er en fil som som har en verdi i <code>Deleted on</code> feltet og som kan gjenskapes. Ønsker vi å gjenskape versjonen ved å bruke <code>restore_version()</code>og referere til Generation ID:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>notebook</strong></pre>
</div>
<div class="sourceCode" id="cb6" data-filename="notebook"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>FileClient.restore_version( source_bucket_name<span class="op">=</span><span class="st">"ssb-dapla-kildomaten-data-delt-test"</span>,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                            source_file_name<span class="op">=</span><span class="st">"restore/data3.parquet"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                            source_generation_id<span class="op">=</span><span class="dv">1718436304922143</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                            new_name<span class="op">=</span><span class="st">""</span> (optional)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                           )</span></code><button title="Kopier til utklippstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Over har vi gjenopprettet en tidligere versjon av fil. Dette betyr at det nå er en ny Live-versjon av filen, og at den som tidligere var Live har blitt <em>non-current</em>. Ved gjenoppretting av <em>non-current</em>-versjoner så kan man også spesifisere nytt navn på filen med parameteret <code>new_name=</code> i <code>restore_version()</code>-funksjonen.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hvorfor kan jeg ikke bruke Google Cloud Console (GCC)?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Man kan liste ut Live, non-current og soft-deleted versjoner fra GCC, som vist i <a href="#fig-gcc-versions" class="quarto-xref">Figur&nbsp;2</a>. Men man har ikke tilgang til <em>Object details</em> og kan derfor ikke hente ut ID-en til versjonen. Til dette må man benytte dapla-toolbelt fra Dapla Lab.</p>
<div id="fig-gcc-versions" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Bilde av hvordan man velger versjoner i GCC.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gcc-versions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/gcc-versions.png" class="img-fluid figure-img" alt="Bilde av hvordan man velger versjoner i GCC.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gcc-versions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;2: Hvordan liste ut versjoner fra GCC.
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="hvordan-sjekker-jeg-om-kildomaten-er-tilgjengelig-for-mitt-team" class="level3">
<h3 class="anchored" data-anchor-id="hvordan-sjekker-jeg-om-kildomaten-er-tilgjengelig-for-mitt-team">Hvordan sjekker jeg om Kildomaten er tilgjengelig for mitt team?</h3>
<div class="columns">
<div class="column" style="width:47.5%;">
<p>Du kan sjekke om teamet ditt har tilgang til Kildomaten ved å gå inn i teamets IaC-repo. Du finner IaC-repoet ved å søke etter team-navnet på statisticsnorway på Github. Repoet er det som heter <code>&lt;teamnavn&gt;-iac</code>. Inne i repoet går du inn filen <code>infra/projects.yaml</code>.</p>
<p>I eksemplet til høyre ser vi hvordan filen ser ut for det fiktive teamet <strong>dapla-example</strong>. For dette teamet ser vi at Kildomaten er skrudd på i prod-miljøet til teamet, men ikke test-miljøet.</p>
</div><div class="column" style="width:5%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:47.5%;">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>dapla-example-iac/infra/projects.yaml</strong></pre>
</div>
<div class="sourceCode" id="cb7" data-filename="dapla-example-iac/infra/projects.yaml"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">team_uniform_name</span><span class="kw">:</span><span class="at"> dapla-example</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">projects</span><span class="kw">:</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">project_name</span><span class="kw">:</span><span class="at"> dapla-example</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">env</span><span class="kw">:</span><span class="at"> test</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">features</span><span class="kw">:</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> dapla-buckets</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">project_name</span><span class="kw">:</span><span class="at"> dapla-example</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">env</span><span class="kw">:</span><span class="at"> prod</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">features</span><span class="kw">:</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> dapla-buckets</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> transfer-service</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> kildomaten</span></span></code><button title="Kopier til utklippstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="hvordan-kan-jeg-se-innholdet-i-mitt-team-sine-bøtter" class="level3">
<h3 class="anchored" data-anchor-id="hvordan-kan-jeg-se-innholdet-i-mitt-team-sine-bøtter">Hvordan kan jeg se innholdet i mitt team sine bøtter?</h3>
<p>For å se innholdet i ditt teams sine bøtter kan du enten gjøre dette <a href="https://probable-waddle-o4w1og1.pages.github.io/statistikkere/jobbe-med-data.html#liste-ut-innhold-i-mappe">med kode fra Jupyter</a>, eller via <a href="https://console.cloud.google.com/">Google Cloud Console (GCC)</a>. Les mer om hvordan man kan <a href="./gcc.html">benytte GCC i SSB</a>.</p>
<p>Husk at det er kun <a href="./statistikkere/hva-er-dapla-team.html#data-admins">data-admins</a> som skal kunne se innhold i kildeprosjektet til teamet. For å gjøre det må de aktivere en tilgang i <a href="./statistikkere/jit.html">JIT-applikasjonen</a>.</p>
</section>
<section id="atlantis-feiler-når-jeg-skrur-på-en-feature.-hva-gjør-jeg" class="level3">
<h3 class="anchored" data-anchor-id="atlantis-feiler-når-jeg-skrur-på-en-feature.-hva-gjør-jeg">Atlantis feiler når jeg skrur på en <em>feature</em>. Hva gjør jeg?</h3>
<p>Når man skrur på en <em><a href="./features.html">feature</a></em> på Dapla, så er det verktøyet <strong>Atlantis</strong> som ruller ut infrastrukturen på GCP. I mange tilfeller kan det hjelpe å skrive <code>atlantis plan</code> i kommentarfeltet til PR’en, slik at Atlantis får kjørt planen en gang til. Hvis den da ikke viser noen feil, så kan du skrive <code>atlantis apply</code> i kommentarfeltet og endringene vil bli effektuert. Får du fortsatt feilmeldinger etter å ha kjørt <code>atlantis plan</code> på nytt, så bør du kontakte Kundeservice for hjelp.</p>
</section>
<section id="jeg-får-meldingen-account-already-exists-når-jeg-prøver-å-logge-meg-inn-på-dapla.-hvordan-løser-jeg-det" class="level3">
<h3 class="anchored" data-anchor-id="jeg-får-meldingen-account-already-exists-når-jeg-prøver-å-logge-meg-inn-på-dapla.-hvordan-løser-jeg-det">Jeg får meldingen <em>Account already exists</em> når jeg prøver å logge meg inn på Dapla. Hvordan løser jeg det?</h3>
<div class="columns">
<div class="column" style="width:47.5%;">
<p>Det hender at man får melding om at <em>Account already exists</em> når man logger seg inn på en Dapla-tjeneste. For å løse dette gjør man følgende:</p>
<ol type="1">
<li>Velg <em>Add to existing account</em> som vist i <a href="#fig-add-existing-account" class="quarto-xref">Figur&nbsp;3</a>.</li>
<li>Velg <em>Google</em> slik som vist i <a href="#fig-authenticate" class="quarto-xref">Figur&nbsp;4</a>.</li>
</ol>
<p>I <a href="#fig-authenticate" class="quarto-xref">Figur&nbsp;4</a> skal du IKKE fylle inn <em>Username or email</em> og <em>Password</em>. Du skal kun trykke på <em>Google</em>-knappen.</p>
<p>Meldingen om at <em>Account already exists</em> forekommer svært sjelden, og typisk skjer det første gang man logger seg inn på en tjeneste.</p>
</div><div class="column" style="width:5%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:47.5%;">
<div id="fig-add-existing-account" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-add-existing-account-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/account-already-exist.png" id="fig-add-existing-account" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-add-existing-account-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;3
</figcaption>
</figure>
</div>
<div id="fig-authenticate" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-authenticate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/account-authenticate-link.png" id="fig-authenticate" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-authenticate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;4
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="hvorfor-viser-git-status-endringer-når-jeg-ikke-har-endret-filene" class="level3">
<h3 class="anchored" data-anchor-id="hvorfor-viser-git-status-endringer-når-jeg-ikke-har-endret-filene">Hvorfor viser <code>git status</code> endringer når jeg ikke har endret filene?</h3>
<p>Dette kan noen ganger forekomme med notebooks eller <code>ipynb</code>-filer fordi de inneholder metadata som kan bli endret over tid. Siden <code>ipynb</code>-filer er et <code>json</code>-basert format, som inkluderer metadata som oppdaterer seg i bakgrunnen, så kan en endring i strukturen til metadataene føre til endringer i den underliggende <code>json</code>-fila selv om man ikke har gjort endringer i <code>ipynb</code>-fila. Endringene blir deretter plukket opp av <code>git</code> som følger med på endringer i filene.</p>
<p>En mulig løsning er å sjekke inn endringene i kodebasen.</p>
<p>I noen tilfeller viser <code>git status</code> at det har skjedd endringer i filer, men <code>git diff</code> viser ingen endring. I disse tilfellene kan det være ulike problemer i bakgrunnen. <a href="https://statistics-norway.atlassian.net/wiki/spaces/A700/pages/3211952133/Git+status+viser+endrede+filer+men+git+diff+viser+ingen+endring">Se denne oversikten</a> over problemer og tilhørende løsninger.</p>
</section>
<section id="hvordan-setter-jeg-opp-2fa-med-authenticator-appen-mot-github-etter-at-jeg-har-byttet-telefon" class="level3">
<h3 class="anchored" data-anchor-id="hvordan-setter-jeg-opp-2fa-med-authenticator-appen-mot-github-etter-at-jeg-har-byttet-telefon">Hvordan setter jeg opp 2FA med Authenticator-appen mot GitHub etter at jeg har byttet telefon?</h3>
<p>Første gang man begynner å jobbe med kode i SSBs GitHub-organisasjon <a href="https://github.com/statisticsnorway">statisticsnorway</a>, så følger man <a href="./statistikkere/git-og-github.html#to-faktor-autentisering">denne oppskriften fra Dapla-manualen</a>. Men hvis man bytter telefon eller lignende, så må man sette opp dette på nytt.</p>
<p>Prosessen for å bytte 2FA-metode for autentisering er <a href="https://docs.github.com/en/authentication/securing-your-account-with-two-factor-authentication-2fa/changing-your-two-factor-authentication-method#changing-an-existing-two-factor-authentication-method">beskrevet i GitHub sin dokumentasjon</a>. Gjør følgende:</p>
<ol type="1">
<li>Logg deg inn med din bruker på <a href="https://github.com/" class="uri">https://github.com/</a>.</li>
<li>Klikk på din profil, øverst til høyre på siden, og velg <strong>Settings</strong></li>
<li>I menyen til venstre velger du <strong>Password and authentication</strong></li>
<li>Skroll ned til <strong>Two-factor-authentication</strong></li>
<li>Under <strong>Two-factor-methods</strong> vil du se <strong>Authenticator app (Configured)</strong> hvis du har brukt dette tidligere.</li>
<li>Trykk <strong>Edit</strong></li>
<li>Skann QR-koden som dukker opp med Authenticator-appen på din nye mobil.</li>
<li>Følg instruksjonene og lagre autentiseringsmetoden når du er ferdig.</li>
</ol>
</section>
<section id="hvorfor-får-jeg-ikke-opprettet-mapper-fra-google-cloud-console-gcc" class="level3">
<h3 class="anchored" data-anchor-id="hvorfor-får-jeg-ikke-opprettet-mapper-fra-google-cloud-console-gcc">Hvorfor får jeg ikke opprettet mapper fra Google Cloud Console (GCC)?</h3>
<p><a href="https://engage.cloud.microsoft/main/org/ssb.no/threads/eyJfdHlwZSI6IlRocmVhZCIsImlkIjoiMjcxODgyNTU2MTQ5NzYwMCJ9?trk_copy_link=V2">I mars 2024 ble det gjort sikkerhetstiltak på Dapla</a> som innebar at funksjonaliteten <strong>Download</strong>, <strong>Upload</strong> og <strong>Create folder</strong> i GCC ble skrudd av. Hvis man prøver å opprette en mappe på den måten vil man få en feilemelding som starter med<br>
<code>Request is prohibited by organization's policy. vpcServiceControlsUniqueIdentifier:</code></p>
<p>Hvis man skal opprette mapper i en bøtte så må man gjøre det med <a href="./statistikkere/jobbe-med-data.html#opprette-mapper">dapla-toolbelt</a>, eller gjøre det fra en tjeneste som <a href="./statistikkere/jupyter.html">Jupyter</a> i <a href="./statistikkere/dapla-lab.html">Dapla Lab</a>. Sistnevnte metode betyr at man åpner tjenesten som det teamet og tilgangsgruppen som har tilgang til ønsket bøtte, og deretter kan man opprette mapper med <code>mkdir</code> i terminalen.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Fotnoter</h2>

<ol>
<li id="fn1"><p>Featuren <em>dapla-buckets</em> inkluderer produkt- og kildebøtta i henholdsvis standard- og kildeprosjektet som de fleste statistikkproduserende team får ved opprettelse.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>I produktbøtta blir noncurrent versjoner slettet hvis det er mer enn 2 nyere versjoner, mens for kildebøtta er grensen på 3 nyere versjoner<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/manual\.dapla\.ssb\.no");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>This site is heavily inspired by the <a href="https://quarto.org/">Quarto website</a>.</p>
</div>   
    <div class="nav-footer-center">
<p>Kom i gang med Dapla</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/statisticsnorway/dapla-manual/edit/main/dapla-manual/faq.qmd" class="toc-action"><i class="bi bi-github"></i>Rediger siden</a></li><li><a href="https://github.com/statisticsnorway/dapla-manual/issues/new" class="toc-action"><i class="bi empty"></i>Rapporter feil</a></li><li><a href="https://github.com/statisticsnorway/dapla-manual/blob/main/dapla-manual/faq.qmd" class="toc-action"><i class="bi empty"></i>Vis kilde</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>