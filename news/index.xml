<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Dapla-manualen</title>
<link>https://manual.dapla.ssb.no/news/</link>
<atom:link href="https://manual.dapla.ssb.no/news/index.xml" rel="self" type="application/rss+xml"/>
<description></description>
<image>
<url>https://manual.dapla.ssb.no/../images/dapla-favicon.png</url>
<title>Dapla-manualen</title>
<link>https://manual.dapla.ssb.no/news/</link>
</image>
<generator>quarto-1.7.32</generator>
<lastBuildDate>Tue, 24 Jun 2025 00:00:00 GMT</lastBuildDate>
<item>
  <title>Oppdater til versjon 4 av dapla-toolbelt</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-06-24-dapla-toolbelt-update/</link>
  <description><![CDATA[ 





<p>Team Statistikktjenester har sluppet versjon 4.0.0 av <a href="https://pypi.org/project/dapla-toolbelt/">dapla-toolbelt</a>. Den største endringen i versjon 4 er at <strong>AuthClient</strong>-delen av dapla-toolbelt nå er fjernet fra dapla-toolbelt og skilt ut i en egen pakke som heter <a href="https://pypi.org/project/dapla-auth-client/">dapla-auth-client</a>. Funksjonene i dapla-toolbelt vil fortsatt fungerere som før, men dapla-toolbelt benytter seg av en ny pakke og måte for autentisering mot NAIS. Alle brukere bør derfor oppdatere til versjon 4 ved første anledning.</p>
<p>Fordelen med å skille ut autentisering i en egen pakke er at brukere som kun trengte dapla-toolbelt for autententisering mot NAIS, ikke lenger trenger å importere alle avhengighetene til dapla-toolbelt til sitt prosjekt.</p>
<p>Formålet med å fortsatt tilby AuthClient i dapla-toolbelt er for å autentisere brukere mot Maskinporten Guardian og Data Collector på NAIS.</p>
<p>Du kan lese dokumentasjonen til <a href="../../../statistikkere/dapla-auth-client.html">dapla-auth-client her</a>, i tillegg er det skrevet et <a href="../../../blog/posts/2025-06-12-dapla-auth-client/index.html">blogg-artikkel om endringen</a>.</p>



 ]]></description>
  <category>dapla-toolbelt</category>
  <category>dapla-auth-client</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-06-24-dapla-toolbelt-update/</guid>
  <pubDate>Tue, 24 Jun 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/dapla-long.png" medium="image" type="image/png" height="67" width="144"/>
</item>
<item>
  <title>Personliggjør dine tjenester på Dapla Lab</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-06-23-startup-script/</link>
  <description><![CDATA[ 





<p>Tjenestene på Dapla Lab støtter nå at brukere kan kjøre sitt eget oppstartsskript når en tjeneste startes. Det gir brukere mulighet til å definere sine egne farger, snarveier, osv. Skriptet må være et <strong>bash-script</strong> og det må ligger lagret i et repo på <a href="https://github.com/statisticsnorway">www.github.com/statisticsnorway</a>. Brukeren kan deretter referere til skriptet under <strong>Avansert</strong> i tjenestekonfigurasjonen på Dapla Lab, slik som vist Figur&nbsp;1.</p>
<div id="fig-dapla-lab-conf-adv" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Advanced configuration for Dapla Lab">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dapla-lab-conf-adv-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="./image.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figur&nbsp;1: Avansert-fanen til en tjeneste på Dapla Lab"><img src="https://manual.dapla.ssb.no/news/posts/2025-06-23-startup-script/image.png" class="img-fluid figure-img" alt="Advanced configuration for Dapla Lab"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dapla-lab-conf-adv-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;1: Avansert-fanen til en tjeneste på Dapla Lab
</figcaption>
</figure>
</div>
<p>Eksempelt i Figur&nbsp;1 viser en bruker som ber om å få kjørt et skript (<strong>personal-init.sh</strong>) som ligger lagret i <a href="https://github.com/statisticsnorway/obr-test">https://github.com/statisticsnorway/obr-test</a>.</p>
<p>Oppstartsskript er et kraftfullt verktøy som lar brukere tilpasse tjenesten sin på mange forskjellige måter. Generelt sett kan man gjør alt man kan gjøre i en terminal inne i tjenesten, bare at det ved oppstart.</p>
<p>Under er et eksempel på et oppstartsskript hvor det gjøres noen endringer i <code>$HOME/.bashrc</code> og <em>theme</em> i Jupyter defineres.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Eksempel på et oppstartskript
</div>
</div>
<div class="callout-body-container callout-body">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>demo-script.sh</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="demo-script.sh" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#!/bin/bash</span></span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Update .bashrc with environment variables and aliases</span></span>
<span id="cb1-4">echo <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$HOME/.bashrc"</span></span>
<span id="cb1-5">echo <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"# Opprettet av mitt personlige startupscript:"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$HOME/.bashrc"</span></span>
<span id="cb1-6">echo <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"export TEST=true"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$HOME/.bashrc"</span></span>
<span id="cb1-7">echo <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"alias gs='git status'"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$HOME/.bashrc"</span></span>
<span id="cb1-8">echo <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"alias ll='ls -alF'"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$HOME/.bashrc"</span></span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set Jupyter-theme via settings file</span></span>
<span id="cb1-11">THEME_NAME<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"JupyterLab Dark"</span></span>
<span id="cb1-12">SETTINGS_DIR<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$HOME/work/.jupyter/config/lab/user-settings/@jupyterlab/apputils-extension"</span></span>
<span id="cb1-13">SETTINGS_FILE<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$SETTINGS_DIR/themes.jupyterlab-settings"</span></span>
<span id="cb1-14"></span>
<span id="cb1-15">mkdir <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>p <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$SETTINGS_DIR"</span></span>
<span id="cb1-16"></span>
<span id="cb1-17">cat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$SETTINGS_FILE"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&lt;</span>EOF</span>
<span id="cb1-18">{</span>
<span id="cb1-19">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">//</span> Theme <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> init<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>script</span>
<span id="cb1-20">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"theme"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$THEME_NAME"</span></span>
<span id="cb1-21">}</span>
<span id="cb1-22">EOF</span>
<span id="cb1-23"></span>
<span id="cb1-24">echo <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"[Init Script] JupyterLab theme set to '$THEME_NAME'"</span></span></code></pre></div>
</div>
</div>
</div>
<p>Hvis oppstartsskriptet feiler, eller man er interessert i hva som ble kjørt, så kan man undersøke logg-filen til oppstartskriptet inne i tjenesten: <code>$HOME/personal_init_script.log</code>.</p>



 ]]></description>
  <category>dapla lab</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-06-23-startup-script/</guid>
  <pubDate>Mon, 23 Jun 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/news/posts/2025-06-23-startup-script/image.png" medium="image" type="image/png" height="47" width="144"/>
</item>
<item>
  <title>Publisering i Vardef er midlertidig sperret</title>
  <dc:creator>Cecilie Seim</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-06-23-vardef-publishing/</link>
  <description><![CDATA[ 





<p>Inntil eierskap av kortnavn er avklart vil det ikke være mulig å publisere variabeldefinisjoner i Vardef.</p>
<p>Du kan fortsatt:</p>
<ul>
<li>opprette nye variabeldefinisjoner som utkast</li>
<li>migrere variabeldefinisjoner fra Vardok til Vardef</li>
<li>redigere utkast</li>
<li>teste publisering i <a href="https://lab.dapla-test.ssb.no/">Dapla Lab Test</a></li>
</ul>
<p>Vi gir beskjed så snart publisering er tilgjengelig igjen.</p>



 ]]></description>
  <category>vardef</category>
  <category>metadata</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-06-23-vardef-publishing/</guid>
  <pubDate>Mon, 23 Jun 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/dapla-long.png" medium="image" type="image/png" height="67" width="144"/>
</item>
<item>
  <title>Blogginnlegg om dapla-auth-client</title>
  <dc:creator>Johnny Niklasson</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-06-12-auth-client-blogginnlegg/</link>
  <description><![CDATA[ 





<p>Autentiseringsklassen for dapla er flyttet fra python-pakken <code>dapla-toolbelt</code> til <code>dapla-auth-client</code>. Les mer om dette i <a href="../../../blog/posts/2025-06-12-dapla-auth-client/index.html">denne blogg-artikkelen</a>.</p>



 ]]></description>
  <category>blogg</category>
  <category>dapla-toolbelt</category>
  <category>dapla-auth-client</category>
  <category>python</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-06-12-auth-client-blogginnlegg/</guid>
  <pubDate>Thu, 12 Jun 2025 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Ny versjon av dapla-toolbelt-metadata</title>
  <dc:creator>Karl Jørgen Russnes</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-06-10-datadoc-update/</link>
  <description><![CDATA[ 





<p>Vi har sluppet en ny versjon av dapla-toolbelt-metadata som tar i bruk en ny versjon av Datadoc modellen. Dette medfører at de som har brukt dapla-toolbelt-metadata programmatisk kan komme til å måtte gjøre kode endringer. <strong>Altså man trenger kun å gjøre endringer om man bruker dapla-toolbelt-metadata programmatisk og man bruker pseudonymisering</strong>.</p>
<p>Hovedforskjellen fra tidligere er at vi har flyttet pseudonymiserings informasjonen fra ved siden av datasettet, til å ligge under hver enkelt variabel. Hver variabel har nå et felt pseudonymisering som inneholder informasjon om hvordan den variabelen er pseudonymisert.</p>



 ]]></description>
  <category>datadoc</category>
  <category>dapla-toolbelt-metadata</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-06-10-datadoc-update/</guid>
  <pubDate>Tue, 10 Jun 2025 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Lansering av Vardef</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-06-09-vardef-lansering/</link>
  <description><![CDATA[ 





<p>Onsdag 11. juni lanseres SSBs nye system for variabeldokumentasjon: <a href="../../../statistikkere/vardef.html">Vardef</a>. Systemet blir en sentral del av SSBs fremtidige metadataløsning, og alle inviteres til lanseringen i morgen.</p>
<p>Les mer om arrangementet <a href="https://ssbno.sharepoint.com/sites/byraanettet/SitePages/Lansering-av-Vardef.aspx">i denne saken</a>.</p>



 ]]></description>
  <category>vardef</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-06-09-vardef-lansering/</guid>
  <pubDate>Mon, 09 Jun 2025 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Ny artikkel - ssb-altinn-python</title>
  <dc:creator>Vidar Strandseter</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-06-07-ssb-altinn-python/</link>
  <description><![CDATA[ 





<p>Vi har skrevet ny artikkel om python-pakken <code>ssb-altinn-python</code>. <a href="../../../statistikkere/ssb-altinn-python.html">Trykk her</a> for å lese den!</p>



 ]]></description>
  <category>ssb-altinn-python</category>
  <category>python</category>
  <category>altinn</category>
  <category>dapla-manual</category>
  <category>isee</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-06-07-ssb-altinn-python/</guid>
  <pubDate>Sat, 07 Jun 2025 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Viktig melding om endringer i Dapla Lab</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-06-06-new-cluster/</link>
  <description><![CDATA[ 





<p><strong>Tirsdag 10. juni 2025 kl 15.00</strong> vil team Skyinfrastruktur gjennomføre en endring i <strong>testmiljøet</strong> til Dapla Lab (<a href="https://lab.dapla-test.ssb.no/" class="uri">https://lab.dapla-test.ssb.no/</a>). Endringen innebærer at brukere må slette alle eksisterende tjenester de har kjørende før kl. <strong>15.00</strong>. Før tjenesten slettes så må man lagre alt man ønsker å beholde, siden dette også slettes når tjenesten slettes. F.eks. skal kode lagres på GitHub og data lagres i bøtter.</p>
<p>Endringen gjennomføres ila av noen minutter, og man kan derfor starte opp en ny tjeneste og fortsette arbeidet noen minutter etter kl 15.00. Du kan verifisere at det er klart for å starte nye tjenester ved å se etter teksten <strong>Test Ny</strong> øverst til venstre i Dapla Lab, slik som vist i Figur&nbsp;1.</p>
<div id="fig-dapla-lab-ny" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Alternativtekst">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dapla-lab-ny-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="./dapla-lab-ny.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figur&nbsp;1: Tekst som angir om brukeren kan starte nye tjenester."><img src="https://manual.dapla.ssb.no/news/posts/2025-06-06-new-cluster/dapla-lab-ny.png" class="img-fluid figure-img" alt="Alternativtekst"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dapla-lab-ny-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;1: Tekst som angir om brukeren kan starte nye tjenester.
</figcaption>
</figure>
</div>
<p>Hvis man ikke har mulighet til å slette tjenesten kl 15.00, så kan man i en periode få tilgang til gamle tjenester på følgende url: <a href="https://legacy-lab.dapla-test.ssb.no/" class="uri">https://legacy-lab.dapla-test.ssb.no/</a>.</p>
<p>Ta kontakt med Kundeservice dersom man har spørsmål eller trenger hjelp til noe.</p>
<section id="endring-i-prod" class="level2">
<h2 class="anchored" data-anchor-id="endring-i-prod">Endring i prod</h2>
<p>Tilsvarende endring vil gjennomføres i <strong>prodmiljøet</strong> til Dapla Lab den <strong>17. juni kl. 15.00</strong>, der gamle tjenester kan nåes på url-en <a href="https://legacy-lab.dapla.ssb.no/" class="uri">https://legacy-lab.dapla.ssb.no/</a> i en periode etter endringen er gjort.</p>


</section>

 ]]></description>
  <category>dapla lab</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-06-06-new-cluster/</guid>
  <pubDate>Fri, 06 Jun 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/dapla-long.png" medium="image" type="image/png" height="67" width="144"/>
</item>
<item>
  <title>Ny artikkel - Hvordan gjennomføre overgang til Dapla?</title>
  <dc:creator>Alex Crozier</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-05-20-dapla-overgang-101/</link>
  <description><![CDATA[ 





<p><img src="https://manual.dapla.ssb.no/images/dapla-lab-datadoc-service.png" class="img-fluid" style="max-width: 40%; float: right;" alt="Dapla logo"> Vi har skrevet en artikkel om hvordan man bør gjennomføre overgangen til Dapla. <a href="../../../statistikkere/dapla-overgang.html">Les artikkelen her</a>.</p>



 ]]></description>
  <category>dapla-manual</category>
  <category>datatilstander</category>
  <category>produksjonssystem</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-05-20-dapla-overgang-101/</guid>
  <pubDate>Tue, 03 Jun 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/dapla-long.png" medium="image" type="image/png" height="67" width="144"/>
</item>
<item>
  <title>Nytt kapittel om Datadoc</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-06-02-datadoc-model/</link>
  <description><![CDATA[ 





<p>Det er skrevet et <a href="../../../statistikkere/datadoc-model.html">nytt kapittel i Dapla-manualen</a> som gir en mer detaljert beskrivelse av informasjonselementene i Datadoc. Dette kan være nyttig både for produsenter og konsumenter av informasjon i Datadoc. Figur&nbsp;1 viser beskrivelsen av Navn-feltet.</p>
<div id="fig-datadoc-model" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-datadoc-model-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="./datadoc-model-name.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figur&nbsp;1: Visning av en beskrivelse fra det nye kapitlet."><img src="https://manual.dapla.ssb.no/news/posts/2025-06-02-datadoc-model/datadoc-model-name.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-datadoc-model-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;1: Visning av en beskrivelse fra det nye kapitlet.
</figcaption>
</figure>
</div>



 ]]></description>
  <category>datadoc</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-06-02-datadoc-model/</guid>
  <pubDate>Mon, 02 Jun 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/news/posts/2025-06-02-datadoc-model/datadoc-model-name.png" medium="image" type="image/png" height="67" width="144"/>
</item>
<item>
  <title>Økt ytelse i Kildomaten</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-05-21-kildomaten-instances/</link>
  <description><![CDATA[ 





<p>Kildomaten vil nå som standard prosessere 100 filer parallelt, mot 5 tidligere. Endringen vil spesielt forbedre ytelsen for team som mottar svært mange filer kildebøtta som skal prosesseres med en Kildomaten-jobb. Antall parallelle prosesser kan også økes over 100 som er standard, men vi ønsker da at teamet tar kontakt med Kundeservice slik at vi kan få erfaringer med hvordan andre systemer, som pseudonymisering, håndterer dette.</p>
<p>Forbedringen i ytelse påvirker i hovedsak Kildoamten sin evne til å prosessere mange små/mellomstore filer, og ikke hvordan den håndterer store filer. Team Statistikktjenester jobber kommer fremover til iverksette tiltak å øke kapasiteten på prosessering av store filer også.</p>
<p><a href="../../../statistikkere/kildomaten.html#skalering">Les oppdatert dokumentasjon for Kildomaten her</a>.</p>



 ]]></description>
  <category>kildomaten</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-05-21-kildomaten-instances/</guid>
  <pubDate>Wed, 21 May 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/dapla-long.png" medium="image" type="image/png" height="67" width="144"/>
</item>
<item>
  <title>Validere at filer er prosessert i Kildomaten</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-05-14-kildomat-check/</link>
  <description><![CDATA[ 





<p>Ifm. driftstansen, og driftsproblemene i etterkant, i <a href="../../../statistikkere/kildomaten.html">Kildomaten</a> fra <strong>12. mai kl. 15.00</strong> til <strong>14. mai kl. 13.00</strong> så kan det være team som ønsker å sjekke om det kom inn filer i kildebøtta som ikke trigget Kildomaten. I denne artikkelen så finner man eksempelkode for å gjøre denne sjekken.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Støtte fra Kundeservice
</div>
</div>
<div class="callout-body-container callout-body">
<p>Hvis teamet ønsker hjelp til å validere om Kildomaten har prosessert alle filer, så kan man <a href="https://ssb.pureservice.com/login">ta kontakt med Kundeservice</a>.</p>
</div>
</div>
<section id="sjekke-kildebøtta" class="level2">
<h2 class="anchored" data-anchor-id="sjekke-kildebøtta">Sjekke kildebøtta</h2>
<p>Det første man bør gjøre er å sjekke om det, i tidsintevallet for driftsstansen, har blitt skrevet filer til mapper i kildebøtta som vanligvis trigger Kildomaten-jobber. Har det ikke skjedd blitt skrevet filer, så trenger man ikke å gjøre noe mer.</p>
<p>Sjekken kan gjøres av en <a href="../../../statistikkere/hva-er-dapla-team.html#data-admins">data-admins</a> på teamet på følgende måte:</p>
<ol type="1">
<li>Åpne Jupyter på <a href="https://lab.dapla.ssb.no/">Dapla Lab</a></li>
<li>Under tjenestekonfigurasjonen for Jupyter velger du å representere data-admins for det aktuelle teamet</li>
<li>Åpne en notebook og velg en kernel som har Python-pakken <a href="https://pypi.org/project/gcsfs/">gcsfs</a> installert. Hvis du ikke har en slik kernel kan du opprette et <a href="../../../statistikkere/ssb-project.html">ssb-project</a> fra terminalen med kommandoen <code>ssb-project create test</code>, gå inn i mappen og installere pakken ved å skrive <code>poetry add gcsfs</code>. Da vil kernelen du skal velge hete <strong>test</strong>.</li>
<li>Kjør denne koden etter at du har endret verdiene til variablene <code>source_bucket</code> og <code>source_folder</code>:<br>
</li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Notebook</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="Notebook" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> datetime <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> datetime</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> gcsfs <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> GCSFileSystem</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pytz</span>
<span id="cb1-4"></span>
<span id="cb1-5">utc <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pytz.UTC</span>
<span id="cb1-6"></span>
<span id="cb1-7">source_bucket <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gs://ssb-dapla-felles-kilde-prod"</span></span>
<span id="cb1-8">source_folder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"freg"</span></span>
<span id="cb1-9"></span>
<span id="cb1-10">filter_start_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> datetime(year<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>, month<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, day<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, hour<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)</span>
<span id="cb1-11">filter_end_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> datetime(year<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>, month<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, day<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>, hour<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span>)</span>
<span id="cb1-12"></span>
<span id="cb1-13"></span>
<span id="cb1-14"></span>
<span id="cb1-15"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> is_file_modified_on_date(file_path: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">bool</span>:</span>
<span id="cb1-16">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb1-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    Returns True if file at file path was modified on the date "filter_date", returns False otherwise</span></span>
<span id="cb1-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    """</span></span>
<span id="cb1-19">    file_info <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> GCSFileSystem().info(path<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>file_path)</span>
<span id="cb1-20">    modified_date: datetime <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> file_info.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mtime"</span>)</span>
<span id="cb1-21">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">isinstance</span>(modified_date, datetime):</span>
<span id="cb1-22">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb1-23"></span>
<span id="cb1-24">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> modified_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> utc.localize(</span>
<span id="cb1-25">        filter_end_date</span>
<span id="cb1-26">    ) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> modified_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> utc.localize(filter_start_date)</span>
<span id="cb1-27"></span>
<span id="cb1-28"></span>
<span id="cb1-29">source_files <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> GCSFileSystem().find(</span>
<span id="cb1-30">    path<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>source_bucket<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">/</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>source_folder<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, maxdepth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>, withdirs<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb1-31">)</span>
<span id="cb1-32">source_files_at_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [f <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> f <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> source_files <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> is_file_modified_on_date(f) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>]</span>
<span id="cb1-33"></span>
<span id="cb1-34"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Source files found between date </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(filter_start_date)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> and </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(filter_end_date)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">:"</span>)</span>
<span id="cb1-35"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(source_files_at_date)</span></code></pre></div>
</div>
<p>Hvis man kjører koden over og den returnerer en tom liste så har man verifisert at det ikke ble skrevet noen filer til mappen under driftsstansen. Hvis koden returnerer en liste med filnavn så bør man undersøke om filene ble prosessert av Kildomaten eller ikke.</p>
</section>
<section id="verifisere-produktbøtta" class="level2">
<h2 class="anchored" data-anchor-id="verifisere-produktbøtta">Verifisere produktbøtta</h2>
<p>Når man har en liste med filnavn som ble skrevet til kildebøtta i tidsperioden med driftsstans, så må man verifisere om filene ble skrevet til produktbøtta som forventet. Hvordan man gjør dette vil avhenge av logikken i teamets kildomaten-skript. Hvis Kildomaten-skriptet skriver en fil til produktbøtta med samme filnavn som er brukt i kildebøtta, så kan man verfisere at samme fil også finne i kildebøtta. Hvis Kildomaten-skriptet endrer navnet, så må man først gjenskape det nye navnet, og deretter verifisere.</p>
<p>For å verifisere om filen er prosessert må man gjøre følgende:</p>
<ol type="1">
<li>hente ut liste med filer fra forrige steg (krever innloggin som <em>data-admins</em> i Dapla Lab)</li>
<li>åpne en ny tjeneste i Dapla Lab som <em>developers</em> og kopiere over listen fra tjenesten man åpnet som <em>data-admins</em>.</li>
<li>åpne en notebook og velg en kernel som har Python-pakken <a href="https://pypi.org/project/gcsfs/">gcsfs</a> installert. Hvis du ikke har en slik kernel kan du opprette et <a href="../../../statistikkere/ssb-project.html">ssb-project</a> fra terminalen med kommandoen <code>ssb-project create test</code>, gå inn i mappen og installere pakken ved å skrive <code>poetry add gcsfs</code>. Da vil kernelen du skal velge hete <strong>test</strong>.</li>
<li>Kjør koden under, der <code>source_files_at_date</code> er listen du kopierte over fra Sjekke kildebøtta-delen. I tillegg må du oppgi hvilken bøtte som skal sjekkes under <code>bucket</code>, og hvilken undermappe i bøtta som det skal søkes gjennom i <code>folder</code>.</li>
</ol>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> gcsfs <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> GCSFileSystem</span>
<span id="cb2-2"></span>
<span id="cb2-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Denne listen inneholder filnavnene vi identifiserte tidligere</span></span>
<span id="cb2-4">source_files_at_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb2-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ssb-etlev-data-kilde-prod/kildetilgang/access-grant_abc.json'</span>,  </span>
<span id="cb2-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ssb-etlev-data-kilde-prod/kildetilgang/access-grant_def.json'</span>,]</span>
<span id="cb2-7"></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Disse variablene må brukeren oppgi selv  </span></span>
<span id="cb2-9">bucket <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gs://my-bucket-name"</span></span>
<span id="cb2-10">folder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"my/folder/name"</span></span>
<span id="cb2-11"></span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> find_missing_files(bucket_name: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, folder_name: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, source_files: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>]:</span>
<span id="cb2-14">    file_names <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [f.split(sep<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>)[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>].split(sep<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"."</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> f <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> source_files]</span>
<span id="cb2-15"></span>
<span id="cb2-16">    fs_prefix <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gs://"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> bucket_name <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gs://"</span></span>
<span id="cb2-17">    fs_path <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>fs_prefix<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}{</span>bucket_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">/</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>folder_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb2-18">    fs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> GCSFileSystem()</span>
<span id="cb2-19"></span>
<span id="cb2-20">    missing_files <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb2-21"></span>
<span id="cb2-22">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i, f <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(file_names):</span>
<span id="cb2-23">        found <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> fs.glob(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>fs_path<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">/**/</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>f<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">.*"</span>)</span>
<span id="cb2-24">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(found) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>:</span>
<span id="cb2-25">            source_file <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"gs://</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>source_files[i]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gs://"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> source_files[i] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> source_files[i]</span>
<span id="cb2-26">            missing_files.append(source_file)</span>
<span id="cb2-27">    </span>
<span id="cb2-28">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> missing_files</span>
<span id="cb2-29"></span>
<span id="cb2-30">find_missing_files(</span>
<span id="cb2-31">  bucket_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>bucket,</span>
<span id="cb2-32">  folder_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>folder,</span>
<span id="cb2-33">  source_files<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>source_files_at_date)</span></code></pre></div>
<p>Funksjonen over returnerer alle filer den ikke finner på den oppgitte stien, og som derfor ikke er prosessert av Kildomaten. I kapitlet som heter Trigge prosessering manuelt finner du en beskrivelse av hvordan man <em>trigger</em> prosesseringen av disse filene manuelt.</p>
</section>
<section id="fra-altinn3-til-isee" class="level2">
<h2 class="anchored" data-anchor-id="fra-altinn3-til-isee">Fra Altinn3 til ISEE</h2>
<p>Statistikkproduksjoner som har datafangst fra Altinn3 og synkroniserer filer prosessert med Kildomaten ned til ISEE, må selv hente ut en liste over hvilke filer som er lastet til ISEE. En fremgangsmåte er sammenligne hvilke filer som innkvittert i SFU med hva som ligger i ISEE-databasen. Disse kan identifiseres ved deres unike referansenummer i SFU. Hvis man har en liste med referansenummer som finnes i SFU, men ikke i ISEE, så kan søke etter disse filene i kildebøtta.</p>
<p>Ta kontakt med Kundeservice dersom man ønsker hjelp til dette.</p>
</section>
<section id="trigge-prosessering-manuelt" class="level2">
<h2 class="anchored" data-anchor-id="trigge-prosessering-manuelt">Trigge prosessering manuelt</h2>
<p>Hvis koden i forrige avsnitt returnerte en liste med filer, så kan man <a href="../../../statistikkere/kildomaten.html#trigge-kilde-manuelt">manuelt trigge prosessering</a> av disse filene med Kildomaten.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Logg deg inn som data-admins for trigge Kildomaten manuelt
</div>
</div>
<div class="callout-body-container callout-body">
<p>For å trigge Kildomaten manuelt må man være logget inn som <strong>data-admins</strong> i en Dapla Lab tjeneste. Det betyr at man kan liste ut alle filer som ble skrevet i et gitt tidspunkt, og trigge prosesseringen av disse i samme notebook eller script. Men man må oppgi <code>project_id</code> for standardprosjektet (ikke kildeprosjektet) i koden under, noe som kan være forvirrende for brukeren. Dette er planlagt endret slik at det blir lettere bruke fremover.</p>
</div>
</div>
<p>Koden i forrige avsnitt returnerte en liste med alle filer som heter <code>source_files_at_date</code>, og vi kan loope over disse og trigge prosesseringen. For å gjøre dette må du først fylle inn riktig verdier for <code>project-id</code> og <code>source_name</code>.</p>
<ol type="1">
<li><strong>project-id</strong> for <em>standardprosjektet</em>. <a href="../../../faq.html#hvordan-finner-jeg-et-google-prosjekt-sin-prosjekt-id">Slik finner du prosjekt-id</a>. Merk at dette ikke er kilde-prosjektet!</li>
<li><strong>source_name</strong> er navnet på mappen i iac-repoet hvor kilden du skal trigge er definert. Navnet på kilden i eksempelet med team <strong>dapla-example</strong> var <code>altinn</code>.</li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Notebook</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="Notebook" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dapla <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> trigger_source_data_processing</span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Brukeren fyller inn her</span></span>
<span id="cb3-4">project_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span></span>
<span id="cb3-5">source_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span></span>
<span id="cb3-6"></span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fjerner bøttenavn fra filstier</span></span>
<span id="cb3-8">stripped_paths <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [path.split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> path <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> path <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> path <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> source_files_at_date]</span>
<span id="cb3-9"></span>
<span id="cb3-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Trigger prosessering for alle filer i listen</span></span>
<span id="cb3-11"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">file</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> stripped_paths:</span>
<span id="cb3-12">    trigger_source_data_processing(project_id, source_name, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">file</span>, kuben<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span></code></pre></div>
</div>


</section>

 ]]></description>
  <category>kildomaten</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-05-14-kildomat-check/</guid>
  <pubDate>Wed, 14 May 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/dapla-long.png" medium="image" type="image/png" height="67" width="144"/>
</item>
<item>
  <title>Årets Dapla-dager er i gang</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-05-13-dapladag-2025/</link>
  <description><![CDATA[ 





<p><a href="dapladag-2025.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://manual.dapla.ssb.no/news/posts/2025-05-13-dapladag-2025/dapladag-2025.jpg" class="img-fluid" style="max-width: 40%; float: right;" alt="Presentasjon på Dapladag"></a></p>
<p>Onsdag forrige uke ble årets Dapladag gjennomført i SSBs lokaler i Oslo. Her kunne ansatte få med seg Frokost med Geir, ulike presentasjoner om Dapla for ulike målgrupper, ny runde med Dapla-grunnkurs og avslutning med pizzafest og quiz. I morgen, onsdag 14. mai 2025, arrangeres Dapla-dagen i Kongsvinger.</p>
<p><a href="https://ssbno.sharepoint.com/sites/byraanettet/SitePages/%C3%85rets-Dapladag---n%C3%A5-ogs%C3%A5-med-grunnkurs-i-Dapla.aspx">Se året program og påmelding her.</a></p>



 ]]></description>
  <category>dapladag</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-05-13-dapladag-2025/</guid>
  <pubDate>Tue, 13 May 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/dapla-long.png" medium="image" type="image/png" height="67" width="144"/>
</item>
<item>
  <title>Ny versjon av Datadoc-editor</title>
  <dc:creator>Miles Winther</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-05-07-datadoc-editor-update/</link>
  <description><![CDATA[ 





<p>I den nye versjonen varsles brukeren når det avdekkes avvik mellom datasettet og eksisterende metadata slik at man kan korrigere metadataene.</p>
<p>En liten feil rapportert av Østhus, Andreas er blitt fikset av Corneil, Carl Franklin: Vi nå kun ta hensyn til primær plassering av en statistikk i et statistikkområde når det utledes mens før tok vi det første vi fant, som førte til merarbeid på korrigering i en del tilfeller. Fasiten for å utlede dette er det som statistikkbanken benytter for kategorisering av statistikk og den ligger her for de som er interessert: www.ssb.no/xp/_/service/mimir/subjectStructurStatistics</p>
<p>I tillegg har vi migrert prosjektet til uv fra Poetry. Det er ikke noe brukerne skal merke, men vi kan melde om en stor forbedring på utvikleropplevelsen.</p>
<p>Release Notes: https://github.com/statisticsnorway/datadoc-editor/releases/tag/v1.0.13</p>



 ]]></description>
  <category>datadoc</category>
  <category>datadoc-editor</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-05-07-datadoc-editor-update/</guid>
  <pubDate>Wed, 07 May 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/dapla-lab-datadoc-service.png" medium="image" type="image/png" height="74" width="144"/>
</item>
<item>
  <title>Driftsbrudd for Kildomaten mandag 12. mai 2025</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-05-06-kildomat-migration/</link>
  <description><![CDATA[ 





<p>I forbindelse med at pseudonymiseringstjenesten på Dapla skal migreres over til NAIS mandag den <strong>12. mai 2025</strong>, så vil det bli en driftsstans i Kildomaten mellom <strong>15.00-21.00</strong> den dagen. <a href="https://engage.cloud.microsoft/main/org/ssb.no/threads/eyJfdHlwZSI6IlRocmVhZCIsImlkIjoiMzMxNDQ4MDg4ODE1MjA2NCJ9?trk_copy_link=V2">Les mer i denne saken på Viva Engage</a>.</p>



 ]]></description>
  <category>kildomaten</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-05-06-kildomat-migration/</guid>
  <pubDate>Tue, 06 May 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/dapla-long.png" medium="image" type="image/png" height="67" width="144"/>
</item>
<item>
  <title>Ny informasjon under Mine tjenester i Dapla Lab</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-05-01-dapla-lab-groups/</link>
  <description><![CDATA[ 





<p><img src="https://manual.dapla.ssb.no/news/posts/2025-05-01-dapla-lab-groups/viz.png" class="img-fluid" style="max-width: 40%; float: right;" alt="Dapla logo"> I dag er det lagt til visning av hvilken tilgangsgruppe som er valgt for åpnede tjenester i Dapla Lab. Det vil gjøre det lettere å vite hvilke data man tilgang til i ulike tjenester. Du finner under informasjonen under <code>Group</code> i tjenesteikonet under <em>Mine tjenester</em>. Informasjonen vises både når tjenesten er aktiv og når den er pauset.</p>



 ]]></description>
  <category>dapla lab</category>
  <category>tilgangsstyring</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-05-01-dapla-lab-groups/</guid>
  <pubDate>Thu, 01 May 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/news/posts/2025-05-01-dapla-lab-groups/viz.png" medium="image" type="image/png" height="86" width="144"/>
</item>
<item>
  <title>Deling av data og /buckets</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-04-30-challenges-gcsfuse/</link>
  <description><![CDATA[ 





<p>Etter noen måneder med erfaring med tilgjengeliggjøring av bøtter som filsystem i Dapla Lab, har vi erfart at funksjonaliteten i noen tilfeller har noen utfordringer.</p>
<p>En utfordring oppstår når team skriver data til delt-bøtter direkte via Transfer Service, uten å logge seg inn på Dapla Lab etterpå. Hvis det delende teamet aldri åpner en tjeneste på Dapla Lab etter at dataene er delt, så vil ikke de dataene vises for konsumentene av dataene under /buckets/ i Dapla Lab.</p>
<p>Årsaken er at opprettelsen av mapper krever skrivetilgang til bøtta, og det har ikke konsumenten av delte-data. Konsumentene vil kunne se dataene via <code>gs://</code>-stien, men ikke <code>/buckets/</code>-stien. Hvis data derimot deles ved at de produseres direkte fra en tjeneste på Dapla Lab, så vil ikke dette være en problemstilling.</p>
<p>Vi jobber med å løse dette problemet, og finner forhåpentligvis en løsning innen kort tid.</p>



 ]]></description>
  <category>dapla lab</category>
  <category>datadeling</category>
  <category>gcsfuse</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-04-30-challenges-gcsfuse/</guid>
  <pubDate>Wed, 30 Apr 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/Dapla-Logo1.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>Endring i tilganger for data-admins</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-04-29-change-data-admins/</link>
  <description><![CDATA[ 





<p>Ifm med <a href="../../../news/posts/2025-04-24-update-shared-buckets/index.html">utrulling av en ny type delt-bøtte</a> ble det oppdaget at noen team hadde en feil i tilgangene for <a href="../../../statistikkere/hva-er-dapla-team.html#data-admins">data-admins</a>. Dette ble rettet i sammenheng med utrulling av de nye delt-bøttene. I praksis vil <em>data-admins</em> merke dette ved at de ikke lenger har tilgang til <strong>produkt</strong>-bøtta når de logger seg som <em>data-admins</em> i Dapla Lab.</p>



 ]]></description>
  <category>dapla lab</category>
  <category>tilgangsstyring</category>
  <category>data-admins</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-04-29-change-data-admins/</guid>
  <pubDate>Tue, 29 Apr 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/Dapla-Logo1.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>Blogginnlegg om bruk av funksjoner</title>
  <dc:creator>Arne Sørli</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-04-28-function-use/</link>
  <description><![CDATA[ 





<p><em>Arne Sørli</em> har skrevet et blogginnlegg som oppfordrer til mer bruk av funksjoner i statistikkproduksjonskode. Innlegget sier litt om hvorfor, hvordan man kan gjøre det og kommer med noen eksempler. Det har også et skript du kan bruke til å sjekke hvor mye bruk av funksjoner det er i ditt repo.</p>
<p><a href="../../../blog/posts/2025-04-25-function-use/index.html">Les innlegget her</a>.</p>



 ]]></description>
  <category>kvakk</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-04-28-function-use/</guid>
  <pubDate>Mon, 28 Apr 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/images/Dapla-Logo1.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>Oppdatert beskrivelse av manuell trigging av Kildomaten-jobber</title>
  <dc:creator>Øyvind Bruer-Skarsbø</dc:creator>
  <link>https://manual.dapla.ssb.no/news/posts/2025-04-26-kildomaten-docs/</link>
  <description><![CDATA[ 





<p>Dapla-manualen er nå oppdatert med en bedre beskrivelse av hvordan man kan trigge Kildomaten manuelt. Brukere må logge seg inn som <em>developers</em> for å manuelt trigge en Kildomaten-jobb. <a href="../../../statistikkere/kildomaten.html#trigge-kilde-manuelt">Les mer i dokumentasjonen</a>.</p>



 ]]></description>
  <category>kildomaten</category>
  <guid>https://manual.dapla.ssb.no/news/posts/2025-04-26-kildomaten-docs/</guid>
  <pubDate>Sat, 26 Apr 2025 00:00:00 GMT</pubDate>
  <media:content url="https://manual.dapla.ssb.no/news/posts/2025-04-26-kildomaten-docs/viz.png" medium="image" type="image/png" height="51" width="144"/>
</item>
</channel>
</rss>
