---
title: Hurtigguide til migrering fra Vardok til Vardef
subtitle: Kokebok for migrering
categories:
  - vardok
  - vardef
  - vardef-forvaltning
  - dapla-toolbelt-metadata
  - dapla lab
author:
  - name: √òyvind Bruer-Skarsb√∏
    affiliation:
      - name: Seksjon for dataplattform (724)
        email: obr@ssb.no
date: "06/10/2025"
date-modified: "06/10/2025"
image: metadata-maalbilde.png
image-alt: "Visualisering av m√•lbilde for metadata"
draft: false
lightbox: true
number-sections: true
---

I denne artikkelen gis det en kjapp veiledning for migrerering av en variabeldefinisjon fra Vardok til Vardef. Mer detaljerte ressurser finnes her: 

- [Migreringsplan](https://statistics-norway.atlassian.net/wiki/spaces/DAPLA/pages/4128276501/Migreringsplan+fra+Vardok+til+Vardef)
- [Dokumentasjon for Vardef-forvaltning](../../../statistikkere/vardef-forvaltning.qmd)
- [Dokumentasjon av Vardef](../../../statistikkere/vardef.qmd)

## Finn fram Vardok-ID 

Alle seksjonsledere har f√•tt tilsendt en oversikt over hvilke variabeldefinisjoner i Vardok som din seksjon er ansvarlig for. I oversikten finner man ogs√• ID-ene til variabeldefinisjonene, og man m√• vite Vardok-ID'en til variabeldefinisjonen man skal migrere f√∏r man begynner.

## Avgj√∏r eierskap

Diskuter f√∏r migreringen hvilket Dapla-team p√• seksjonen som skal "eie" variabeldefinisjonen. Det er kun ett team som kan v√¶re ansvarlig, og man definerer hvilket team det skal v√¶re n√•r man velger team og tilgangsgruppe ved oppstart av Vardef-forvaltning (forklart i neste steg). 

## Starte Vardef-forvaltning

![](vardef-forvaltning-service.png){style="max-width: 40%; float: right;" fig-alt="Visualisering av deltb√∏tter og team"}

Selve migreringen gj√∏res fra en tjeneste som heter [Vardef-forvaltning](../../../statistikkere/vardef-forvaltning.qmd) i Dapla Lab. √ònsker man √• teste litt hvordan systemet fungerer uten fare for √• gj√∏re noe galt, s√• kan man √•pne tjenesten i test-milj√∏et p√• Dapla Lab: <https://lab.dapla-test.ssb.no/>. Her jobber man mot en test-versjon av Vardef-basen som blir slettet med jevne mellomrom, og ingen informasjon blir eksponert for eksterne. √ònsker man √• migrere "p√• ekte", s√• logger seg man inn i prodmilj√∏et: <https://lab.dapla.ssb.no/>. 

## Selve migrering

Inne tjenesten **Vardef-forvaltning** s√• ligger det ferdige notebooks for vanlige arbeidsflyter i Vardef. For √• migrere fra Vardok til Vardef s√• √•pner du notebooken `migrerer_variabeldefinisjoner.ipynb` under mappen `./variable_definitions/`.

For √• migrere variabeldefinisjonen med ID'en **10** i Vardok, s√• gj√∏r du f√∏lgende:

1. Kj√∏r f√∏rste kodecelle
2. I andre kodecelle s√• fyller du inn Vardok-ID i variabelen `min_id_liste`. Under har jeg fylt inn `10`: 

```{.python filename="Notebook"}
min_id_liste = [10]
print(f"‚úÖ {len(min_id_liste)} vil bli migrert")
```
3. Deretter kj√∏rer du cellen. 
4. N√•r du kj√∏rer den neste cellen s√• skjer selve migreringen. Hvis den vellykket s√• f√•r du f√∏lgende beskjed i notebooken: `INFO: ‚úÖ Successfully migrated variable definition 'wkapinnt' with ID 'LlT6N-cz'`, bare at kortnavn og ID er unikt for din variabel. **VIKTIG: Husk kortnavnet siden du trenger det i neste steg**. 

Og med det s√• er variabelen migrert fra Vardok til Vardef. Variabeldefinisjonen har n√• f√•tt utledet alle informasjon automatisk som er mulig √• utlede, og resten m√• brukeren fylle inn selv. Husk at definisjonen n√• er lagret i databasen til Vardef, men med status `UTKAST`. Dvs. at man kan endre p√• all informasjon og den er ikke publisert enda. For √• publisere m√• man redigere innholdet i utkastet, og deretter kj√∏re en annen notebook som gj√∏r selve publiseringen. Dette er forklart under.  

## Rediger innhold

For √• redigere innholdet i et utkast i Vardef s√• kan man kj√∏re notebooken `rediger_utkast_variabeldefinisjon.ipynb`. Da gj√∏r man f√∏lgende:

1. √Öpne notebooken `rediger_utkast_variabeldefinisjon.ipynb`
2. Kj√∏r gjennom de to f√∏rste cellene og skriv inn kortnavnet til den migrerte variabelen (ble printet ut n√•r du migrerte).
3. Etter kj√∏ringen over ble det skrevet en yaml-fil med innholdet i variabeldefinisjonen. Her kan du gj√∏re endringer direkte i fila.
4. N√•r du er ferdig med √• gj√∏re endringer s√• kan du kj√∏re den siste kodecellen for √• lagre arbeidet ditt i et nytt utkast. Husk at du b√∏r lagre ofte og man kan redigere utkast s√• mange ganger man vil.  

N√•r en variabeldefinisjon er migrert fra Vardok til et utkast i Vardef, s√• kan man begynne √• redigere innholdet. Det er obligatorisk √• g√• gjennom all informasjon og kvalitetssikre innholdet. Hvis det er behov for √• avklare innholdet med andre i SSB, s√• skal dette gj√∏res f√∏r den publiseres. N√•r en variabel f√∏rst er publsiert eksternt i Vardef s√• kan den ikke endres, kun opprette nye gyldighetsperioder eller gj√∏re mindre endringer.  

## Publiser

N√•r man er ferdig med redigere innholdet i variabeldefinisjonen og har publisert det til utkast, s√• kan man bruke notebooks til √• publisere internt (`publiser_variabeldefinisjon_internt.ipynb`), eller publisere eksternt (`publiser_variabeldefinisjon_eksternt.ipynb`). 

ü•≥Gratulerer! Du har n√• migrert en variabeldefinisjon fra Vardok til Vardef. 

