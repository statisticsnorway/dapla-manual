# Pseudonymisering

På Dapla er det flere tjenester som til sammen gir team muligheten til å pseudonymisere, de-pseudonymisere eller re-pseudonymisere data^[Pseudonymisering defineres her som å erstatte spesifikke data med kunstige data (pseudonymer), mens de-pseudonymisering gjør det samme bare motsatt vei. Re-pseudonymisering defineres som å bytte ut et pseudonym med et annet, uten at brukeren nødvendigvis får tilgang til den opprinnelige verdien. ]. Disse tjenestene er satt opp på en slik måte at statistikkteam kan være selvbetjent i bruken av funksjonaliteten, samtidig som de sikrer at *direkte identifiserende opplysninger* håndteres i henhold til lovverk og SSBs egne bestemmelser.

I dette kapitlet forteller vi hvordan man går frem for å pseudonymisere data i et statistikkteam på Dapla. Før man leser videre er det viktig at leseren har en klar forståelse av hvordan [Dapla-team og tilgangsstyring](./hva-er-dapla-team.html) fungerer på Dapla, samt er kjent med tjenesten [Kildomaten](./kildomaten.html). Kildomaten er tjenesten som automatiserer overgangen fra [kildedata](./datatilstander.html#kildedata) til [inndata](./datatilstander.html#inndata), som blant annet inkluderer pseudonymisering.   

## Forberedelser

For å pseudonymisere på Dapla må man være en del av Dapla-team og [Kildomaten](./kildomaten.html) må være skrudd på for teamet. Hvis du er usikker på om Kildomaten er skrudd på kan du [sjekke dette selv i teamets IaC-repo](../faq.html#hvordan-sjekker-jeg-om-kildomaten-er-tilgjengelig-for-mitt-team).  


## Hva skal pseudonymiseres?

Hvert team er ansvarlig for å selv vurdere hvordan sine [kildedata](./datatilstander.html.#kildedata) skal behandles. All kildedata i SSB er klassifisert som sensitivt, og hvis man har kildedata som skal pseudonymiseres, så skal det skje i overgangen fra kildedata til [inndata](./datatilstander.html#inndata). Er man usikker på om man skal pseudonymisere eller ikke, eller hvilke regler som gjelder for teamets kildedata, så kan man diskutere med [personvernombudet](https://ssbno.sharepoint.com/sites/Sikkerhetogpersonvern/SitePages/Personvernombud-i-SSB.aspx), eventuelt ta kontakt med juristene i SSB.

::: {.callout-warning}
## Ikke glem dataminimering!
Et av de viktigste tiltakene for å verne om personvern i data er å fjerne informasjon som ikke er strengt nødvendig for formålet. Dataminimering bør gjøres når data samles inn til SSB. I de tilfellene der det ikke er mulig, så skal det dataminimeres i overgangen fra kildedata til inndata. Etter at man har dataminimert så kan man vurdere hvilken gjenværende informasjon som skal pseudonymiseres. 
:::

### Personidentifiserende informasjon (PII)

Definisjon. Det følger av både personopplysningsloven og statistikkloven at personidentifiserende informasjon (PII) som samles inn for statistikkformål skal pseudonymiseres. I SSB så er det gjennomført personvernkonsekvensutredning^[Personvernkonsekvensutredningen (PVK) er det norske ordet for den engelske betegnelsen *Data Protection Impact Assessment (DPIA)*. Datatilsynet definerer en DPIA som en *systematisk prosess, som identifiserer og evaluerer potensielle personvernkonsekvenser fra alle interessenters synsvinkel i et prosjekt, initiativ, foreslått system eller prosess.* [Les mer om DPIA i SSB](https://statistics-norway.atlassian.net/wiki/spaces/ARK/pages/2889154616/Personvernkonsekvensvurdering+DPIA)] (PVK) for to områder som benytter seg av PII:

1. Personstatistikk
2. Næringsstatistikk

Under går vi gjennom hvordan PII skal behandels i de to tilfellene, og hvilke konsekvenser det har for samarbeid mellom team på Dapla.

#### Personstatistikk

:::: {.columns}

::: {.column width="65%"}
 I SSB er det også gjennomført en [Personvernkonsekvensutredningen (PVK) for personstatistikk](https://statistics-norway.atlassian.net/wiki/spaces/ARK/pages/2888237093/Personvernkonsekvensvurdering+PVK+-+Personstatistikk+p+SSBs+skyplattform) som presiserer at dette gjelder for all personstatistikk.  

Hvert team som håndterer personopplysninger må derfor vurdere sine kildedata og identifisere mulige PII. All data som innholder PII, og som ikke kan dataminimeres bort, skal pseudonymiseres. @tbl-pii-examples viser en ikke-uttømmende liste over PII som har vært identifisert i SSB tidligere. Merk at dette ikke er en fullstendig liste over PII, men hvis et team har denne informasjonen i sine data så skal de pseudonymiseres i overgangen fra kildedata til inndata. 

For mange er fødselsnummer en viktig variabel i kraft at den fungerer som en koblingsnøkkel for ulike typer persondata. Men som vist i @tbl-pii-examples så er mye annen informasjon som regnes som PII. For eksempel er også adresse og bankkontonummer å regne som PII. 


#### Enkeltpersonforetak

I @tbl-pii-examples ser vi at organisasjonsnummeret til et [enkeltpersonforetak (ENK)](https://snl.no/enkeltpersonforetak) er å regne som PII. Grunnen til det er at en ENK eies av en fysisk person og all informasjon knyttet til ENK er å regne som personopplysninger. [PVK for personstatistikk](https://statistics-norway.atlassian.net/wiki/spaces/ARK/pages/2888237093/Personvernkonsekvensvurdering+PVK+-+Personstatistikk+p+SSBs+skyplattform) begrenser sine vurderinger til å ikke inkludere informasjon om ENK.

Siden personstatistikk skal pseudonymisere PII så følger det at også PII knyttet til ENK også bør pseudonymiseres. Grunnen til det er at det finnes mye åpen informasjon om ENK, og derfor kan man lett knytte pseudonym til en person basert lett tilgjengelig informasjon. Kan man knytte et pseudonym til en person så kan pseudonymet anses å være avslørt. Selv om det samme ikke gjelder for andre organisasjonsformer (AS, ansvarlig selskap, etc.) så vil det være naturlig at disse også pseudonymiseres, blant annet for å sikre ENK'er lett kan skilles ut. 

#### Næringsstatistikk

I SSB er det gjennomført en egen [PVK for næringsstatistikk](https://statistics-norway.atlassian.net/wiki/spaces/ARK/pages/3114663957/Personvernkonsekvensvurdering+for+SSBs+n+ringsstatistikk). Grunnen er at det også her behandles personopplysninger, men at behandlingen av disse krever en annen tilnærming enn for personstatistikk. Et viktig bakteppe for denne vurderingen at organisasjonsidentifiserende informasjon (OII) tidligere blitt vurdert som nødvendig å kunne se klarttekst. [Les mer OII her](./pseudonymisering.qmd#organisasjonsidentifiserende-informasjon-(oii)). 


:::

::: {.column width="5%"}
<!-- empty column to create gap -->
:::

::: {.column width="30%"}

| PII                                        |
| ------------------------------------------ |
| Fødselsnummer                              |
| D-nummer                                   |
| S-nummer                                   |
| Ektefellenummer                            |
| Familienummer                              |
| Husholdningsnummer                         |
| Dufnummer                                  |
| Bankkontonummer                            |
| Adresse (tekstlig)                         |
| Eiendomsidentifikator                      |
| Veiadresse (numerisk)                      |
| Matrikkeladresse (numerisk)                |
| Registreringsnummer (kjøretøy)             |
| Navn                                       |
| Kontaktinformasjon                         |
| Helsepersonellnummer                       |
| Organisasjonsnummer enkeltpersonsforetak   |
| Foretakets navn                            |
: Ikke-uttømmende liste over PII som har vært identifisert i SSB tidligere. {#tbl-pii-examples}

:::

::::

I PVK for næringsstatistikk skiller man mellom behov knyttet til populasjonsforvaltning og statistikkproduksjon. Det blir vurdert som nødvendig at ansatte som jobber med populasjonsforvaltning alltid har tilgang til all informasjon i klartekst, dvs. at ingen informasjon skal pseudonymiseres. Når det gjelder personopplysninger i statistikkproduksjons så er bildet noe mer sammensatt. Følgende PII blir identifisert som tilstede i produksjon av næringsstatistikk:

- Enkeltpersonforetak
- Fysiske personer som innehar roller i foretak eller bedrifter
- Fysiske personer som er kontaktpersoner for virksomheter i rapporteringer til SSB
- Personopplysninger fra administrative registre og skjemaundersøkelser om fysiske personer som har roller i foretak eller virksomheter

De tre første punktene over blir vurdert som ikke nødvendig å pseudonymisere. Det siste punktet, som ofte innebærer å koble på informasjon fra personstatistikk, skal som hovedregel pseudonymiseres. I disse tilfellene skal man da som hovedregel pseudonymisere både PII og OII. Men det åpnes for at unntak kan gjøres i følgende scenarioer:

- Dersom opplysninger om foretak/virksomhet (OII) må behandles upseudonymisert, så må både PII og OII behandles upseudonymisert^[Grunnen til dette er at hvis hvis PII er pseudonymisert og OII ikke, så vil det være lett å avsløre pseudonymet.].
- Hvis det er opplysninger om foretak/virksomhet som gjør det enkelt å identifisere enheten ut fra f.eks. geografisk tilhørighet, næringskode eller dominans innen næringen som utøves, bør både PII og OII behandles upseudonymisert.

I sum betyr dette at PII i næringstatistikk kun skal pseudonymiseres der det kobles på personoppplysninger fra registre eller skjemaundersøkelser, og det ikke er nødvendig med OII for å produsere statistikken. 

### Organisasjonsidentifiserende informasjon (OII)

I 2022 ble satt ned en gruppe som skulle evaluere hvordan SSB skulle behandle organisasjonsidentifiserende informasjon (OII) etter den nye statistikkloven fra 2019. [Gruppa leverte en rapport](https://statistics-norway.atlassian.net/wiki/spaces/ARK/pages/3268182105/Rapport+fra+arbeidsgruppe+-+behandling+av+org.nr.+etter+ny+statistikklov) med konklusjonen om at pseudonymisering av OII er uforenlig med formålet med behandlingen. Med andre ord skal OII ikke pseudonymiseres. 

## Eksempel figur



```{mermaid}
%%| label: fig-papis
%%| fig-cap: "Pseudonymisering med Papis-nøkkel på Dapla."

stateDiagram
state Kildomaten {
        direction LR
        fnr --> snr
        snr --> pseudonym

        state dapla_toolbelt {
        fnr
        } 

        state sidService {
        snr
        }

        state pseudoService {
        pseudonym
        }
    }

```


## Tilgangsstyring

Når et team har fått tilgang til *Dapla Pseudo Service*, så må de fortsatt forholde seg til tilgangsstyring på 2 nivåer:

1. **Miljøet**  
I prod-miljøet til teamet kan man bare pseudonymisere data via automatiske prosesseringer i Kildomaten. Dvs. at man IKKE kan sitte i Jupyter og interaktivt pseudonymisere sensitiv informasjon. Ønsker man å gjøre dette fra Jupyter må man gjøre det med testdata i teamets test-miljø. 
2. **Teamet**  
Siden personopplysninger kun skal forekomme i [kildedata](./datatilstander.html#kildedata), og det kun er de med tilgangsrollen [data-admins](./hva-er-dapla-team.html#data-admins) som kan godkjenne den automatiske prosesseringen som skjer fra kildedata til inndata.
3. **data-admins**  
data-admins er de eneste på teamet som kan gi seg selv tilgang til å manuelt inspisere kildedata. Disse tilgangene er kortvarige og aktiveres med en begrunnelse i [JIT-applikasjonen](./jit.qmd).

På grunn av den strenge tilgangen til kildedata og pseudonymisering så er det anbefalt at man utvikler skriptet som pseudonymiserer i test-miljøet til teamet. Under forklarer vi hvordan dette gjøres. Les mer her.

## Filformater

Kommer snart. 

## Papis-pseudonym

Kommer snart.


Hvilken type informasjon som skal pseudonymiseres kan også påvirke hvordan vi pseudonymiserer. Siden fødselsnummer er mye brukt som koblingsnøkkel på tvers av team, så er man mer avhengig av at alle bruker samme pseudonym. Kravet til krypteringsalgoritmen trenger heller ikke være like strengt for et fødselsnummer bestående av 11 siffer. Til sammenligning vil informasjon som navn, som f.eks. kan inkludere mellomrom og særnorske bokstaver, kreve en algoritme som håndterer slike tilfeller. Vi diskuterer ulike algoritmer senere i kapitlet. 




## Anbefalt arbeidsflyt

Når man skal sette opp et Python-skript som automatisere overgangen fra kildedata til inndata, inkludert pseudonymisering, så er det anbefalt å utvikle koden i test-miljøet til teamet. Der kan hele teamet ha tilgang til både data, pseudonymisering og Kildomaten. Skriptet som genereres her kan enkelt overføres til prodmiljøet senere. 

### Testdata

Kommer snart.









