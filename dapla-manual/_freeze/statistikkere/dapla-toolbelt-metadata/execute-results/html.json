{
  "hash": "53bb4abe5c08a3120c51e0fe86653911",
  "result": {
    "markdown": "---\ntitle: dapla-toolbelt-metadata\nfreeze: true\nexecute:\n    echo: false\n    include: true\n\n---\n\n::: {.cell execution_count=1}\n\n::: {.cell-output .cell-output-stdout}\n```\nSist endret: 2024-08-15 av Miles Mason Winther\n```\n:::\n:::\n\n\n> Verktøy og klienter for å jobbe med Metadata på Dapla.\n\n## Lenker\n\n- PyPI pakke: <https://pypi.org/project/dapla-toolbelt-metadata/>\n- API dokumentasjon: <https://statisticsnorway.github.io/dapla-toolbelt-metadata/>\n- GitHub repo: <https://github.com/statisticsnorway/dapla-toolbelt-metadata>\n\n## Installasjon\n\n#### Pip\n\n```{.bash filename=\"Terminal\"}\npip install dapla-toolbelt-metadata\n```\n\n#### Poetry\n\n```{.bash filename=\"Terminal\"}\npoetry add dapla-toolbelt-metadata\n```\n\n## Datasett\n\nDen anbefalte måten å skape metadata for et nytt datasett er med [Datadoc brukergrensesnittet](./datadoc.qmd). Men det finnes tilfeller hvor det kan være tungvint å bruke og man ønsker å jobbe med metadata ved hjelp av kodespråk. Det kan man gjøre med `Datadoc` klassen i `dapla-toolbelt-metadata` pakken.\n\n### Brukstilfeller\n\n#### Nye tidsperioder\n\nDet primære brukstilfelle er å skape metadata for datasett skapt for nye tidsperioder som en del av produksjonsløp.\n\nI dette tilfelle er Datadoc brukergrensesnittet brukt for å skape det første metadatadokumentet. Man kan deretter bruke metadatadokumentet som en utgangspunkt for nye tidsperioder. `Datadoc` klassen utleder oppdatert informasjon fra filstien til datasettene for nye tidsperioder og oppdaterer metadataen til å stemme.\n\n::: {.callout-note}\nDette forutsetter at strukturen av datasettet og betydningen av variablene er lik mellom tidsperiodene. Om det finnes uforventede avvik så kastes en `InconsistentDatasetsError` med detaljer om avviket.\n:::\n\n##### Kodeeksempel\n\n```{.python filename=\"Notebook\"}\nfrom dapla_metadata.datasets import Datadoc\n\nmeta = Datadoc(\n    dataset_path=\"gs://ssb-dapla-felles-data-produkt-prod/datadoc/sykefratot/klargjorte_data/person_testdata_p2022_v1.parquet\",             # <1>\n    metadata_document_path=\"gs://ssb-dapla-felles-data-produkt-prod/datadoc/sykefratot/klargjorte_data/person_testdata_p2021_v1__DOC.json\", # <2>\n)\nmeta.write_metadata_document() # <3>\n```\n\n1. En ny tidsperiode av et datasett\n2. Eksisterende metadatadokument\n3. Skaper et nytt metadatadokument med filsti som stemmer med datasettet, i dette tilfellet `gs://ssb-dapla-felles-data-produkt-prod/datadoc/sykefratot/klargjorte_data/person_testdata_p2022_v1__DOC.json`\n\n",
    "supporting": [
      "dapla-toolbelt-metadata_files"
    ],
    "filters": [],
    "includes": {}
  }
}